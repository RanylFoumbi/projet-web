{
  "version": 3,
  "sources": ["../../villus/dist/villus.esm.js"],
  "sourcesContent": ["/**\n  * villus v3.5.0\n  * (c) 2024 Abdelrahman Awad\n  * @license MIT\n  */\nimport { isRef, toValue, isReactive, nextTick, getCurrentInstance, inject, provide, onBeforeUnmount, ref, watch, onMounted, computed } from 'vue';\nimport { GraphQLError, print } from 'graphql';\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar fastJsonStableStringify = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n\nvar stringify = /*@__PURE__*/getDefaultExportFromCjs(fastJsonStableStringify);\n\nfunction unravel(signal, vars) {\n    if (isRef(signal)) {\n        return signal.value;\n    }\n    if (typeof signal === 'function') {\n        return signal(toValue(vars));\n    }\n    return signal;\n}\nfunction isWatchable(val) {\n    return isRef(val) || isReactive(val) || typeof val === 'function';\n}\nfunction arrayToExistHash(items) {\n    return items.reduce((acc, item) => {\n        acc[String(item)] = true;\n        return acc;\n    }, {});\n}\nfunction debounceAsync(inner) {\n    let resolves = [];\n    let ticking = false;\n    return function (...args) {\n        if (!ticking) {\n            nextTick(() => {\n                const result = inner(...args);\n                resolves.forEach(r => r(result));\n                resolves = [];\n                ticking = false;\n            });\n            ticking = true;\n        }\n        return new Promise(resolve => resolves.push(resolve));\n    };\n}\nfunction isEqual(lhs, rhs) {\n    return stringify(lhs) === stringify(rhs);\n}\nfunction useCallback() {\n    const hooks = new Set();\n    function on(handler) {\n        hooks.add(handler);\n        return () => {\n            hooks.delete(handler);\n        };\n    }\n    async function run(...args) {\n        for (const hook of hooks) {\n            await hook(...args);\n        }\n    }\n    return {\n        on,\n        run,\n    };\n}\n\n// https://github.com/FormidableLabs/urql/blob/master/src/utils/error.ts\nconst generateErrorMessage = (networkError, graphqlErrors) => {\n    let error = '';\n    if (networkError !== undefined) {\n        return (error = `[Network] ${networkError.message}`);\n    }\n    if (graphqlErrors !== undefined) {\n        graphqlErrors.forEach(err => {\n            error += `[GraphQL] ${err.message}\\n`;\n        });\n    }\n    return error.trim();\n};\nfunction normalizeGqlError(error) {\n    if (typeof error === 'string') {\n        return new GraphQLError(error);\n    }\n    if (typeof error === 'object' && error.message) {\n        return new GraphQLError(error.message, error.nodes, error.source, error.positions, error.path, error, error.extensions || {});\n    }\n    return error;\n}\nclass CombinedError extends Error {\n    constructor({ response, networkError, graphqlErrors, }) {\n        const gqlErrors = graphqlErrors === null || graphqlErrors === void 0 ? void 0 : graphqlErrors.map(normalizeGqlError);\n        const message = generateErrorMessage(networkError, gqlErrors);\n        super(message);\n        this.name = 'CombinedError';\n        this.response = response;\n        this.message = message;\n        this.networkError = networkError;\n        this.graphqlErrors = gqlErrors;\n    }\n    get isGraphQLError() {\n        return !!(this.graphqlErrors && this.graphqlErrors.length);\n    }\n    toString() {\n        return this.message;\n    }\n}\n\n/**\n * Normalizes a query string or object to a string.\n */\nfunction normalizeQuery(query) {\n    if (typeof query === 'string') {\n        return query;\n    }\n    // Supports typed document strings in 3.2\n    if (query && query instanceof String) {\n        return query.toString();\n    }\n    if (query && 'kind' in query) {\n        return print(query);\n    }\n    return null;\n}\n\nasync function parseResponse(response) {\n    let json;\n    const responseData = {\n        ok: response.ok,\n        statusText: response.statusText,\n        status: response.status,\n        headers: response.headers,\n    };\n    try {\n        json = await response.json();\n    }\n    catch (err) {\n        return Object.assign(Object.assign({}, responseData), { statusText: err.message, body: null });\n    }\n    return Object.assign(Object.assign({}, responseData), { body: json });\n}\nfunction resolveGlobalFetch() {\n    if (typeof window !== 'undefined' && 'fetch' in window && window.fetch) {\n        return window.fetch.bind(window);\n    }\n    if (typeof global !== 'undefined' && 'fetch' in global) {\n        return global.fetch;\n    }\n    if (typeof self !== 'undefined' && 'fetch' in self) {\n        return self.fetch;\n    }\n    return undefined;\n}\nconst DEFAULT_FETCH_OPTS = {\n    method: 'POST',\n    headers: {\n        'content-type': 'application/json',\n    },\n};\nfunction mergeFetchOpts(lhs, rhs) {\n    return Object.assign(Object.assign(Object.assign({}, lhs), rhs), { method: rhs.method || lhs.method || DEFAULT_FETCH_OPTS.method, headers: Object.assign(Object.assign({}, (lhs.headers || {})), (rhs.headers || {})) });\n}\nfunction makeFetchOptions({ query, variables }, opts) {\n    const normalizedQuery = normalizeQuery(query);\n    if (!normalizedQuery) {\n        throw new Error('A query must be provided.');\n    }\n    return mergeFetchOpts({ body: JSON.stringify({ query: normalizedQuery, variables }) }, opts);\n}\n\nfunction hash(x) {\n    let h, i, l;\n    for (h = 5381 | 0, i = 0, l = x.length | 0; i < l; i++) {\n        h = (h << 5) + h + x.charCodeAt(i);\n    }\n    return h >>> 0;\n}\nfunction getQueryKey(operation, ...components) {\n    const variables = operation.variables ? stringify(operation.variables) : '';\n    const query = normalizeQuery(operation.query);\n    return hash(`${query}${variables}${components.join('')}`);\n}\n\nfunction cache() {\n    let resultCache = {};\n    function setCacheResult({ key, tags }, result) {\n        resultCache[key] = { result, tags };\n    }\n    function getCachedResult({ key }) {\n        var _a;\n        return (_a = resultCache[key]) === null || _a === void 0 ? void 0 : _a.result;\n    }\n    function clearCache(tags) {\n        if (!tags) {\n            resultCache = {};\n            return;\n        }\n        const tagArray = Array.isArray(tags) ? tags : [tags];\n        if (!tagArray.length) {\n            return;\n        }\n        const tagsLookup = arrayToExistHash(tagArray);\n        // clears cache keys one by one\n        Object.keys(resultCache).forEach(key => {\n            const cacheItem = resultCache[key];\n            if (!cacheItem.tags) {\n                return;\n            }\n            const tagExists = cacheItem.tags.some(t => tagsLookup[t]);\n            if (tagExists) {\n                delete resultCache[key];\n            }\n        });\n    }\n    function cachePlugin({ afterQuery, useResult, operation }) {\n        var _a;\n        if (operation.type === 'mutation' && ((_a = operation.clearCacheTags) === null || _a === void 0 ? void 0 : _a.length)) {\n            afterQuery(result => {\n                // only after successful operation\n                if (result.data) {\n                    clearCache(operation.clearCacheTags);\n                }\n            });\n            return;\n        }\n        if (operation.type !== 'query' || operation.cachePolicy === 'network-only') {\n            return;\n        }\n        // Set the cache result after query is resolved\n        afterQuery(result => {\n            setCacheResult(operation, result);\n        });\n        // Get cached item\n        const cachedResult = getCachedResult(operation);\n        if (operation.cachePolicy === 'cache-only') {\n            return useResult(cachedResult || { data: null, error: null }, true);\n        }\n        // if exists in cache, terminate with result\n        if (cachedResult) {\n            return useResult(cachedResult, operation.cachePolicy === 'cache-first');\n        }\n    }\n    cachePlugin.clearCache = clearCache;\n    return cachePlugin;\n}\n\nfunction fetch(opts) {\n    const fetch = (opts === null || opts === void 0 ? void 0 : opts.fetch) || resolveGlobalFetch();\n    if (!fetch) {\n        throw new Error('Could not resolve a fetch() method, you should provide one.');\n    }\n    return async function fetchPlugin(ctx) {\n        var _a, _b;\n        const { useResult, opContext, operation } = ctx;\n        const fetchOpts = makeFetchOptions(operation, opContext);\n        let response;\n        try {\n            response = await fetch(opContext.url, fetchOpts).then(parseResponse);\n        }\n        catch (err) {\n            return useResult({\n                data: null,\n                error: new CombinedError({ response, networkError: err }),\n            }, true);\n        }\n        // Set the response on the context\n        ctx.response = response;\n        const data = (_a = response.body) === null || _a === void 0 ? void 0 : _a.data;\n        if (!response.ok || !response.body) {\n            // It is possible than a non-200 response is returned with errors, it should be treated as GraphQL error\n            const ctorOptions = {\n                response,\n            };\n            if ((_b = response.body) === null || _b === void 0 ? void 0 : _b.errors) {\n                ctorOptions.graphqlErrors = response.body.errors;\n            }\n            else {\n                ctorOptions.networkError = new Error(response.statusText);\n            }\n            return useResult({\n                data,\n                error: new CombinedError(ctorOptions),\n            }, true);\n        }\n        useResult({\n            data,\n            error: response.body.errors ? new CombinedError({ response, graphqlErrors: response.body.errors }) : null,\n        }, true);\n    };\n}\n\nfunction dedup() {\n    // Holds references to pending operations\n    const pendingLookup = {};\n    return function dedupPlugin(ctx) {\n        // Don't dedup mutations or subscriptions\n        if (ctx.operation.type !== 'query') {\n            return;\n        }\n        // extract the original useResult function\n        const { useResult } = ctx;\n        // Clean up pending queries after they are resolved\n        ctx.afterQuery(() => {\n            delete pendingLookup[ctx.operation.key];\n        });\n        // If pending, re-route the result to it\n        const existingOp = pendingLookup[ctx.operation.key];\n        if (existingOp) {\n            return existingOp.then(result => {\n                useResult(result, true);\n            });\n        }\n        // Hold a resolve fn reference\n        let resolveOp;\n        // Create a pending operation promise and add it to lookup\n        pendingLookup[ctx.operation.key] = new Promise(resolve => {\n            resolveOp = resolve;\n        });\n        // resolve the promise once the result are set via another plugin\n        ctx.useResult = function (...args) {\n            useResult(...args);\n            resolveOp(args[0]);\n        };\n    };\n}\n\nconst VILLUS_CLIENT = Symbol('villus.client');\n\n/**\n * setActiveClient should be called to solve problem outside setup\n */\nlet activeClient;\n/**\n * Sets or unsets the active client\n *\n * @param client - villus client instance\n */\nconst setActiveClient = (client) => (activeClient = client);\n/**\n * Get the currently active client if there is any.\n */\nconst getActiveClient = () => {\n    var _a;\n    const vm = getCurrentInstance();\n    if (!vm) {\n        return activeClient;\n    }\n    return ((_a = vm.provides) === null || _a === void 0 ? void 0 : _a[VILLUS_CLIENT]) || inject(VILLUS_CLIENT, activeClient);\n};\nconst defaultPlugins = () => [cache(), dedup(), fetch()];\nclass Client {\n    constructor(opts) {\n        this.install = () => undefined;\n        this.url = opts.url;\n        this.defaultCachePolicy = opts.cachePolicy || 'cache-first';\n        this.plugins = opts.use || [...defaultPlugins()];\n        this.taggedQueries = [];\n    }\n    /**\n     * Executes an operation and returns a normalized response.\n     */\n    async execute(operation, type, queryContext, onResultChanged) {\n        let result;\n        const opContext = Object.assign(Object.assign({ url: this.url }, DEFAULT_FETCH_OPTS), { headers: Object.assign(Object.assign({}, DEFAULT_FETCH_OPTS.headers), ((queryContext === null || queryContext === void 0 ? void 0 : queryContext.headers) || {})) });\n        let terminateSignal = false;\n        const afterQuery = [];\n        const context = {\n            useResult(pluginResult, terminate) {\n                if (terminate) {\n                    terminateSignal = true;\n                }\n                // this means the `useResult` was called multiple times\n                if (result) {\n                    onResultChanged === null || onResultChanged === void 0 ? void 0 : onResultChanged(pluginResult);\n                }\n                result = pluginResult;\n            },\n            afterQuery(cb) {\n                afterQuery.push(cb);\n            },\n            operation: Object.assign(Object.assign({}, operation), { key: getQueryKey(operation), type, cachePolicy: ('cachePolicy' in operation ? operation.cachePolicy : this.defaultCachePolicy) || this.defaultCachePolicy }),\n            opContext,\n        };\n        let lastI = 0;\n        for (let i = 0; i < this.plugins.length; i++) {\n            const plugin = this.plugins[i];\n            await plugin(context);\n            if (result) {\n                lastI = i;\n                break;\n            }\n        }\n        return new Promise((resolve, reject) => {\n            if (!result) {\n                reject(new Error('Operation result was not set by any plugin, make sure you have default plugins configured or review documentation'));\n                return;\n            }\n            resolve(result);\n            (async () => {\n                if (!terminateSignal) {\n                    for (let i = lastI + 1; i < this.plugins.length; i++) {\n                        const plugin = this.plugins[i];\n                        await plugin(context);\n                    }\n                }\n                const afterQueryCtx = { response: context.response };\n                for (let i = 0; i < afterQuery.length; i++) {\n                    const afterCb = afterQuery[i];\n                    await afterCb(result, afterQueryCtx);\n                }\n            })();\n        });\n    }\n    async executeQuery(operation, queryContext, onResultChanged) {\n        return this.execute(operation, 'query', queryContext, onResultChanged);\n    }\n    async executeMutation(operation, queryContext) {\n        return this.execute(operation, 'mutation', queryContext);\n    }\n    async executeSubscription(operation) {\n        const result = await this.execute(operation, 'subscription');\n        return result;\n    }\n    registerTaggedQuery(tags, refetch) {\n        const id = Symbol('Tagged query');\n        this.taggedQueries.push({ id, tags, refetch });\n        return id;\n    }\n    unregisterTaggedQuery(id) {\n        const idx = this.taggedQueries.findIndex(tq => tq.id === id);\n        if (idx === -1) {\n            return;\n        }\n        this.taggedQueries.splice(idx, 1);\n    }\n    async refetchTaggedQueries(tags) {\n        const tagsLookup = arrayToExistHash(tags);\n        const queries = this.taggedQueries.filter(tq => {\n            return tq.tags.some(t => tagsLookup[t]);\n        });\n        return Promise.all(queries.map(q => q.refetch())).then(() => undefined);\n    }\n}\nfunction createClient(opts) {\n    const client = new Client(opts);\n    client.install = (app) => {\n        // this allows useQuery() etc useFunctions to get client outside of a component setup after\n        setActiveClient(client);\n        app.provide(VILLUS_CLIENT, client);\n    };\n    return client;\n}\nfunction resolveInternalInjection(vm, symbol) {\n    var _a, _b, _c, _d;\n    // Vue 2 uses `proxy._provided` while Vue 3 has `provides`\n    // Vue 2.7's proxy property might be a bug but thats the IRL situation.\n    return ((_b = (_a = vm === null || vm === void 0 ? void 0 : vm.proxy) === null || _a === void 0 ? void 0 : _a._provided) === null || _b === void 0 ? void 0 : _b[symbol]) || ((_c = vm === null || vm === void 0 ? void 0 : vm._provided) === null || _c === void 0 ? void 0 : _c[symbol]) || ((_d = vm === null || vm === void 0 ? void 0 : vm.provides) === null || _d === void 0 ? void 0 : _d[symbol]);\n}\nfunction resolveClient() {\n    const vm = getCurrentInstance();\n    // Uses same component provide as its own injections\n    // Due to changes in https://github.com/vuejs/vue-next/pull/2424\n    let client = vm && inject(VILLUS_CLIENT, resolveInternalInjection(vm, VILLUS_CLIENT));\n    if (client)\n        setActiveClient(client);\n    client = getActiveClient();\n    if (client === null || client === undefined) {\n        throw new Error('Cannot detect villus Client, did you forget to call `useClient`? Alternatively, you can explicitly pass a client as the `manualClient` argument.');\n    }\n    return client;\n}\n\nfunction useClient(opts) {\n    const client = createClient(opts);\n    if (getCurrentInstance()) {\n        provide(VILLUS_CLIENT, client);\n    }\n    return client;\n}\n\nconst defaultMapper = (val) => val.data;\nfunction useQuery(opts, mapData = defaultMapper) {\n    var _a;\n    const client = (_a = opts === null || opts === void 0 ? void 0 : opts.client) !== null && _a !== void 0 ? _a : resolveClient();\n    if (opts.tags) {\n        const id = client.registerTaggedQuery(opts.tags, async () => {\n            await execute();\n        });\n        onBeforeUnmount(() => {\n            client.unregisterTaggedQuery(id);\n        });\n    }\n    const { query, variables, cachePolicy, fetchOnMount, paused, skip, onData: dataHook, onError: errorHook, } = normalizeOptions(opts);\n    let currentFetchOnMount = fetchOnMount;\n    const data = ref(defaultMapper({ data: null, error: null }));\n    let lastResult = { data: null, error: null };\n    const isFetching = ref(fetchOnMount !== null && fetchOnMount !== void 0 ? fetchOnMount : false);\n    const isDone = ref(false);\n    const isStale = ref(true);\n    const error = ref(null);\n    const { on: onData, run: executeDataHooks } = useCallback();\n    const { on: onError, run: executeErrorHooks } = useCallback();\n    if (dataHook) {\n        onData(dataHook);\n    }\n    if (errorHook) {\n        onError(errorHook);\n    }\n    // This is to prevent state mutation for racing requests, basically favoring the very last one\n    let lastPendingOperation;\n    const isCurrentlyPaused = () => unravel(paused, (variables || {}));\n    function onResultChanged(result) {\n        if (result.data) {\n            executeDataHooks(result.data);\n        }\n        if (result.error) {\n            executeErrorHooks(result.error);\n        }\n        data.value = mapData(result);\n        error.value = result.error;\n    }\n    async function execute(overrideOpts) {\n        const vars = toValue(variables) || {};\n        // result won't change if execution is skipped\n        if (unravel(skip, vars)) {\n            isFetching.value = false;\n            return {\n                data: (lastResult === null || lastResult === void 0 ? void 0 : lastResult.data) || null,\n                error: (lastResult === null || lastResult === void 0 ? void 0 : lastResult.error) || null,\n            };\n        }\n        isFetching.value = true;\n        const pendingExecution = client.executeQuery({\n            query: toValue(query),\n            variables: toValue((overrideOpts === null || overrideOpts === void 0 ? void 0 : overrideOpts.variables) || vars),\n            cachePolicy: (overrideOpts === null || overrideOpts === void 0 ? void 0 : overrideOpts.cachePolicy) || cachePolicy,\n            tags: opts === null || opts === void 0 ? void 0 : opts.tags,\n        }, toValue(opts === null || opts === void 0 ? void 0 : opts.context), onResultChanged);\n        lastPendingOperation = pendingExecution;\n        const res = await pendingExecution;\n        // Avoid state mutation if the pendingExecution isn't the last pending operation\n        if (pendingExecution !== lastPendingOperation) {\n            // we still return this result to preserve the integrity of \"execute\" calls\n            return { data: res.data, error: res.error };\n        }\n        lastResult = res;\n        onResultChanged(res);\n        isDone.value = true;\n        isFetching.value = false;\n        isStale.value = false;\n        lastPendingOperation = undefined;\n        return { data: res.data, error: res.error };\n    }\n    function executeIfNotPaused() {\n        const isPaused = isCurrentlyPaused();\n        if (!isPaused) {\n            execute();\n        }\n    }\n    if (isWatchable(query)) {\n        watch(query, executeIfNotPaused);\n    }\n    if (isWatchable(paused)) {\n        watch(() => !isCurrentlyPaused(), shouldExecute => {\n            if (shouldExecute && isStale.value) {\n                execute();\n            }\n        });\n    }\n    function initVarWatchers() {\n        let oldCache;\n        if (!variables || !isWatchable(variables)) {\n            return;\n        }\n        watch(() => toValue(variables), newValue => {\n            const id = hash(stringify(newValue));\n            // prevents duplicate queries.\n            if (id === oldCache) {\n                return;\n            }\n            oldCache = id;\n            isStale.value = true;\n            executeIfNotPaused();\n        }, { deep: true });\n    }\n    initVarWatchers();\n    const api = { data, isFetching, isDone, error, execute, onData, onError };\n    /**\n     * if can not getCurrentInstance, the func use outside of setup, cannot get onMounted\n     * when outside of setup and fetchOnMount is true, execute immediately, but a little confused\n     * todo: maybe better to add a new param decide execute immediately, but it's ok also now\n     */\n    const vm = getCurrentInstance();\n    if (currentFetchOnMount) {\n        if (!paused || !isCurrentlyPaused()) {\n            vm ? onMounted(() => execute()) : execute();\n        }\n    }\n    return Object.assign(Object.assign({}, api), { async then(onFulfilled) {\n            currentFetchOnMount = false;\n            await api.execute();\n            return onFulfilled(api);\n        } });\n}\nfunction normalizeOptions(opts) {\n    const defaultOpts = {\n        variables: {},\n        fetchOnMount: true,\n    };\n    return Object.assign(Object.assign(Object.assign({}, defaultOpts), opts), { query: opts.query });\n}\n\nfunction useMutation(query, opts) {\n    var _a;\n    const client = (_a = opts === null || opts === void 0 ? void 0 : opts.client) !== null && _a !== void 0 ? _a : resolveClient();\n    const data = ref(null);\n    const isFetching = ref(false);\n    const isDone = ref(false);\n    const error = ref(null);\n    // This is to prevent state mutation for racing requests, basically favoring the very last one\n    let lastPendingOperation;\n    async function execute(variables) {\n        var _a, _b;\n        isFetching.value = true;\n        const vars = variables || {};\n        const pendingExecution = client.executeMutation({\n            query,\n            variables: vars, // FIXME: fix this casting\n            clearCacheTags: [...((opts === null || opts === void 0 ? void 0 : opts.clearCacheTags) || []), ...((opts === null || opts === void 0 ? void 0 : opts.refetchTags) || [])],\n        }, toValue(opts === null || opts === void 0 ? void 0 : opts.context));\n        lastPendingOperation = pendingExecution;\n        const res = await pendingExecution;\n        nextTick(() => {\n            if (opts === null || opts === void 0 ? void 0 : opts.refetchTags) {\n                client.refetchTaggedQueries(opts.refetchTags);\n            }\n        });\n        // Avoid state mutation if the pendingExecution isn't the last pending operation\n        if (pendingExecution !== lastPendingOperation) {\n            // we still return this result to preserve the integrity of \"execute\" calls\n            return { data: res.data, error: res.error };\n        }\n        if (res.data)\n            (_a = opts === null || opts === void 0 ? void 0 : opts.onData) === null || _a === void 0 ? void 0 : _a.call(opts, res.data);\n        if (res.error)\n            (_b = opts === null || opts === void 0 ? void 0 : opts.onError) === null || _b === void 0 ? void 0 : _b.call(opts, res.error);\n        data.value = res.data;\n        error.value = res.error;\n        isDone.value = true;\n        isFetching.value = false;\n        lastPendingOperation = undefined;\n        return { data: data.value, error: error.value };\n    }\n    return { data, isFetching, isDone, error, execute };\n}\n\nconst defaultReducer = val => val.data;\nfunction useSubscription(opts, reduce = defaultReducer) {\n    var _a, _b, _c;\n    const client = (_a = opts.client) !== null && _a !== void 0 ? _a : resolveClient();\n    const { query, variables, paused, skip } = opts;\n    const subscribeOnMount = (_b = opts.subscribeOnMount) !== null && _b !== void 0 ? _b : true;\n    const data = ref((_c = opts === null || opts === void 0 ? void 0 : opts.initialData) !== null && _c !== void 0 ? _c : reduce({ data: null, error: null }, null));\n    const error = ref(null);\n    const isPaused = computed(() => unravel(paused, variables));\n    const isFetching = ref(true);\n    function handleResponse(result) {\n        data.value = reduce(result, data.value);\n        error.value = result.error;\n    }\n    /**\n     * if can not getCurrentInstance, the func use outside of setup, cannot get onMounted\n     * when outside of setup initObserver immediately.\n     */\n    let observer;\n    const subscribe = debounceAsync(async function subscribe() {\n        unsubscribe();\n        if (shouldSkip()) {\n            return;\n        }\n        isFetching.value = true;\n        const result = await client.executeSubscription({\n            query: toValue(query),\n            variables: toValue(variables),\n        });\n        observer = result.subscribe({\n            next(result) {\n                if (isPaused.value) {\n                    return;\n                }\n                const response = transformResult(result);\n                isFetching.value = false;\n                handleResponse(response);\n            },\n            complete() { },\n            error(err) {\n                if (isPaused.value) {\n                    return;\n                }\n                const response = { data: null, error: new CombinedError({ networkError: err, response: null }) };\n                isFetching.value = false;\n                return handleResponse(response);\n            },\n        });\n        return observer;\n    });\n    function unsubscribe() {\n        observer === null || observer === void 0 ? void 0 : observer.unsubscribe();\n        observer = undefined;\n    }\n    const vm = getCurrentInstance();\n    if (!isPaused.value && !shouldSkip() && subscribeOnMount) {\n        vm ? onMounted(subscribe) : subscribe();\n    }\n    // TODO: if outside of setup, it should be recommend manually pause it(or some action else)\n    vm && onBeforeUnmount(unsubscribe);\n    function shouldSkip() {\n        return unravel(skip, toValue(variables) || {});\n    }\n    if (isWatchable(paused)) {\n        watch(paused, val => {\n            if (!val) {\n                subscribe();\n            }\n        });\n    }\n    if (isWatchable(query)) {\n        watch(query, subscribe);\n    }\n    if (isWatchable(variables)) {\n        watch(variables, (value, oldValue) => {\n            if (!isEqual(value, oldValue)) {\n                subscribe();\n            }\n        });\n    }\n    if (isWatchable(skip)) {\n        watch(shouldSkip, (value, oldValue) => {\n            if (value === oldValue) {\n                return;\n            }\n            value ? unsubscribe() : subscribe();\n        });\n    }\n    return {\n        data,\n        error,\n        paused: isPaused,\n        isFetching,\n        subscribe: () => {\n            subscribe();\n        },\n        unsubscribe,\n    };\n}\n/**\n * Transforms the result from a standard operation result to villus result\n */\nfunction transformResult(result) {\n    if (!result.errors) {\n        return { data: result.data || null, error: null };\n    }\n    return {\n        data: result.data || null,\n        error: new CombinedError({ graphqlErrors: [...result.errors], response: null }),\n    };\n}\n\nfunction handleSubscriptions(forwarder) {\n    const forward = forwarder;\n    return async function subscriptionsHandlerPlugin({ operation, useResult }) {\n        if (operation.type !== 'subscription') {\n            return;\n        }\n        if (!forward) {\n            throw new Error('No subscription forwarder was set.');\n        }\n        const normalizedQuery = normalizeQuery(operation.query);\n        if (!normalizedQuery) {\n            throw new Error('A query must be provided.');\n        }\n        const result = await forward(Object.assign(Object.assign({}, operation), { query: normalizedQuery }));\n        useResult(result, true);\n    };\n}\n\nfunction definePlugin(fn) {\n    return fn;\n}\n\nexport { Client, CombinedError, VILLUS_CLIENT, cache, createClient, dedup, defaultPlugins, definePlugin, fetch, getActiveClient, getQueryKey, handleSubscriptions, makeFetchOptions, mergeFetchOpts, normalizeQuery, parseResponse, setActiveClient, useClient, useMutation, useQuery, useSubscription };\n"],
  "mappings": "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",
  "names": ["stringify", "fetch", "_a", "subscribe", "result"]
}
